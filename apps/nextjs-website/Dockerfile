FROM node:18-alpine
ARG ENVIRONMENT=demo
ENV ENVIRONMENT=${ENVIRONMENT}
ARG PREVIEW_MODE=true
ENV PREVIEW_MODE=${PREVIEW_MODE}
ARG PREVIEW_URL=https://preview.b2bportals.pagopa.it/preview
ENV PREVIEW_URL=${PREVIEW_URL}
ARG PREVIEW_TOKEN=demo
ENV PREVIEW_TOKEN=${PREVIEW_TOKEN}
ARG PREVIEW_TOKEN=demo
ENV PREVIEW_TOKEN=${PREVIEW_TOKEN}
ARG STRAPI_API_BASE_URL=https://b2bportals.pagopa.it
ENV STRAPI_API_BASE_URL=${STRAPI_API_BASE_URL}
WORKDIR /app
COPY package*.json ./
RUN npm install
COPY . .
RUN npm run build
EXPOSE 3000
CMD npm run start